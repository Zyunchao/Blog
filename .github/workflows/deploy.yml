name: Deploy Documentation to GitHub Pages

on:
    push:
        branches:
            - master # 监视主分支的推送

jobs:
    deploy:
        runs-on: ubuntu-latest

        steps:
            - name: Checkout code
              uses: actions/checkout@v2

            - name: Install pnpm
              run: npm install -g pnpm

            - name: Install dependencies
              run: pnpm install

            - name: Build documentation
              run: pnpm run docs:build # 使用你的构建命令

            - name: Deploy to GitHub Pages
              uses: peaceiris/actions-gh-pages@v3
              with:
                  github_token: ${{ secrets.MY_PERSONAL_TOKEN }}
                  publish_dir: ./.vitepress/dist # 指向你的构建输出目录
                  publish_branch: main # 目标仓库的分支
                  external_repository: https://github.com/Zyunchao/zyunchao.github.io.git # 目标仓库的完整地址
